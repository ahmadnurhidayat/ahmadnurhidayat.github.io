---
import BaseLayout from '../../layouts/BaseLayout.astro';
import ProjectCard from '../../components/ProjectCard.astro';
import { getCollection } from 'astro:content';

const projects = (await getCollection('projects', ({ data }) => !data.draft))
  .sort((a, b) => {
    if (a.data.pinned && !b.data.pinned) return -1;
    if (!a.data.pinned && b.data.pinned) return 1;
    return parseInt(b.data.year) - parseInt(a.data.year);
  });
---

<BaseLayout title="Projects | Ahmad Nurhidayat" description="Portfolio of DevOps and Cloud projects.">
  <section class="max-w-4xl mx-auto px-4 sm:px-6 py-16">
    <div class="mb-10">
      <h1 class="text-2xl md:text-3xl font-semibold text-gray-900 dark:text-white">Projects</h1>
      <p class="text-gray-600 dark:text-dark-400 mt-2">
        Here are some of the current projects I've been working on. I really enjoy creating new projects and coming up with new ideas. I'm always working on something new, so check back often!
      </p>
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      {projects.map((project) => (
        <ProjectCard 
          title={project.data.title}
          description={project.data.description}
          year={project.data.year}
          slug={project.slug}
          image={project.data.image}
          pinned={project.data.pinned}
        />
      ))}
    </div>
  </section>
</BaseLayout>
